/** @jsxImportSource react */
import React from 'react';

interface HelpModalProps {
    onClose: () => void;
    onLoadSampleData: () => void;
    onClearAllData: () => void;
    onDownloadSampleData: () => void;
}

const HelpModal = ({ onClose, onLoadSampleData, onClearAllData, onDownloadSampleData }: HelpModalProps) => {
    return (
        <div className="modal-backdrop">
            <div className="modal-content" style={{maxWidth: '800px', textAlign: 'left'}}>
                <h2>Hilfe zur Anwendung</h2>
                <div className="help-content" style={{ maxHeight: '70vh', overflowY: 'auto', paddingRight: '1rem' }}>
                    <p>Willkommen bei der Hilfe für Ihre Anwendung zur pädagogischen Dokumentation. Hier finden Sie eine Erklärung aller wichtigen Funktionen.</p>

                    <h3>1. Aufbau der Anwendung</h3>
                    <p>Die Anwendung ist in mehrere Bereiche aufgeteilt:</p>
                    <ul>
                        <li><strong>Kopfzeile:</strong> Ganz oben finden Sie den Titel der Anwendung.</li>
                        <li><strong>Werkzeugleiste:</strong> Unter der Kopfzeile befindet sich die Leiste mit den Hauptaktionen (z.B. Kind anlegen, Suchen, Exportieren).</li>
                        <li><strong>Navigation (links):</strong> Hier können Sie die Anzeige filtern und zwischen Kindern und Tagen wechseln.</li>
                        <li><strong>Hauptbereich (rechts):</strong> Hier werden die Protokolleinträge für das ausgewählte Kind oder den ausgewählten Tag angezeigt.</li>
                    </ul>

                    <h3>2. Kinder verwalten</h3>
                    <h4>Kind anlegen</h4>
                    <p>Klicken Sie in der Werkzeugleiste auf <code>➕ Kind anlegen</code>. Es öffnet sich ein Formular, in das Sie alle notwendigen Informationen eintragen können.</p>
                    
                    <h4>Kind suchen</h4>
                    <p>Nutzen Sie das Suchfeld in der Werkzeugleiste. Beginnen Sie, den Namen eines Kindes einzutippen, und die Liste in der Navigation wird in Echtzeit gefiltert.</p>
                    
                    <h3>3. Einträge verwalten</h3>
                    <h4>Neuen Eintrag erstellen</h4>
                    <p>Wählen Sie zuerst ein Kind aus der Navigationsliste aus. Im Hauptbereich erscheint dann über der Eintragsliste der Button <code>✨ Neuer Eintrag</code>. Ein Klick darauf öffnet das Formular zum Erstellen eines neuen Protokolleintrags für dieses Kind.</p>

                    <h4>Eintrag ändern oder löschen</h4>
                    <p>Klicken Sie auf einen beliebigen Eintrag in der Liste im Hauptbereich, um ihn auszuwählen (er wird mit einem farbigen Rahmen markiert). Sobald ein Eintrag ausgewählt ist, werden die Buttons <code>✏️ Eintrag ändern</code> und <code>🗑️ Eintrag löschen</code> in der Werkzeugleiste aktiv.</p>

                    <h3>4. Filtern und Ansichten</h3>
                    <p>Die Navigation auf der linken Seite bietet Ihnen mächtige Filterfunktionen:</p>
                    <ul>
                        <li><strong>Schuljahr, Schule, Klasse, Kind:</strong> Diese Dropdown-Menüs filtern die angezeigte Kinderliste. Sie können die Filter kombinieren, um z.B. nur Kinder einer bestimmten Klasse in einem bestimmten Schuljahr zu sehen.</li>
                        <li><strong>Tag:</strong> Wenn Sie hier ein Datum auswählen, wechselt die Anwendung in die "Tagesansicht". Im Hauptbereich sehen Sie dann alle Einträge aller Kinder für den ausgewählten Tag. Um zurück zur Kind-Ansicht zu gelangen, wählen Sie einfach wieder ein Kind aus der Liste aus.</li>
                    </ul>

                    <h3>5. Datenmanagement (Import & Export)</h3>
                    <p>In der Werkzeugleiste finden Sie Buttons zum Sichern und Wiederherstellen Ihrer Daten.</p>
                    <ul>
                        <li><strong>📤 Export:</strong> Erstellt eine vollständige Sicherung aller Kinder und Einträge in einer <code>.json</code>-Datei und speichert sie auf Ihrem Computer. Führen Sie dies regelmäßig durch, um Datenverlust zu vermeiden.</li>
                        <li><strong>📥 Import:</strong> Lädt eine zuvor exportierte <code>.json</code>-Datei. <strong>Achtung:</strong> Beim Import werden alle aktuell in der Anwendung gespeicherten Daten unwiderruflich überschrieben!</li>
                    </ul>

                    <h3>6. Einstellungen</h3>
                    <p>Über den Button <code>⚙️ Einstellungen</code> in der Navigation können Sie das Erscheinungsbild der Anwendung anpassen:</p>
                    <ul>
                        <li><strong>Farbschema:</strong> Wählen Sie zwischen "Standard (Hell)", "Dunkel", "Hoher Kontrast" und "Farbig". Bei "Farbig" können Sie die Farben der Hauptbereiche selbst festlegen.</li>
                        <li><strong>Schriftgröße:</strong> Passen Sie die Schriftgröße mit dem Schieberegler an Ihre Lesegewohnheiten an.</li>
                    </ul>
                    <p>Ihre Einstellungen werden automatisch im Browser gespeichert.</p>

                    <h3 style={{marginTop: '2rem', borderTop: '1px solid var(--border-color)', paddingTop: '1rem'}}>Daten zurücksetzen & Testen</h3>
                    <p>Die folgenden Aktionen sind nützlich, um die Anwendung zu testen oder komplett neu zu beginnen. <strong>Achtung: Diese Aktionen können nicht rückgängig gemacht werden.</strong></p>
                     <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem', flexWrap: 'wrap' }}>
                        <button type="button" className="btn btn-primary" onClick={onLoadSampleData}>
                           📊 Beispieldatensatz laden
                        </button>
                        <button type="button" className="btn btn-secondary" onClick={onDownloadSampleData}>
                           💾 Beispieldaten herunterladen
                        </button>
                        <button type="button" className="btn btn-danger" onClick={onClearAllData}>
                           🗑️ Alle Daten löschen
                        </button>
                    </div>
                </div>
                <div className="modal-actions">
                    <button type="button" className="btn btn-primary" onClick={onClose}>✔️ Schließen</button>
                </div>
            </div>
        </div>
    );
};

export default HelpModal;
